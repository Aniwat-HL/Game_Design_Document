:root{
  --bg:#0b0d10; --card:#0f1318; --muted:#9aa4b2; --text:#e6edf3; --border:#1f2937; --primary:#3b82f6; --ring:rgba(59,130,246,.35);
  --accent:#60a5fa; --accent2:#34d399; --shadow:0 8px 24px rgba(0,0,0,.14);
}
[data-theme="light"]{
  --bg:#f7fafc; --card:#ffffff; --muted:#475569; --text:#0b1220; --border:#e5e7eb; --ring:rgba(59,130,246,.25);
  --shadow:0 8px 22px rgba(2,6,23,.06);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family:"Noto Sans Thai", Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text)}
a{color:inherit; text-decoration:none}
.container{max-width:1160px; margin:0 auto; padding:20px}
header{display:flex; flex-wrap:wrap; gap:14px; justify-content:space-between; align-items:center; padding:18px 0}
.brand{display:flex; gap:12px; align-items:center}
.avatar{width:48px; height:48px; border-radius:999px; background:linear-gradient(135deg,var(--accent),var(--accent2)); display:grid; place-items:center; color:#0b1220; font-weight:800}
.title{font-size:1.5rem; font-weight:800; letter-spacing:.2px}
.subtitle{color:var(--muted)}
nav.primary{display:flex; gap:8px; padding:10px 12px; background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0)); border:1px solid var(--border); border-radius:14px; justify-content:flex-start; backdrop-filter: blur(6px)}
nav.primary a{padding:10px 14px; border-radius:10px; border:1px solid transparent}
nav.primary a.active{background:var(--primary); color:#fff}
.theme-toggle{border:1px solid var(--border); background:var(--card); border-radius:12px; padding:8px 10px; cursor:pointer}

.card{background:var(--card); border:1px solid var(--border); border-radius:18px; padding:18px; box-shadow:var(--shadow)}
.grid{display:grid; grid-template-columns:repeat(12,1fr); gap:18px}
.grid-12{grid-column:span 12}
@media(min-width:1024px){ .grid-8{grid-column:span 8} .grid-4{grid-column:span 4}}

h1,h2,h3{margin:.3rem 0 .7rem; scroll-margin-top:90px}
h1{font-size:1.6rem}
h2{font-size:1.25rem}
h3{font-size:1.1rem}
.muted{color:var(--muted)}
.link{padding:8px 12px; border-radius:10px; border:1px solid var(--border)}
.link.primary{background:var(--primary); color:#fff; border-color:transparent}

.prose{max-width:85ch}
.prose p{line-height:1.95}
.prose ul{padding-left:1.2rem}
.prose li{margin:.2rem 0}

#progress{position:fixed; inset:0 0 auto 0; height:3px; background:linear-gradient(90deg,var(--accent),var(--accent2)); width:0%; z-index:50}

.toc{position:sticky; top:12px; text-align:left; max-height:calc(100vh - 24px); overflow:auto}
.toc ol{padding-left:18px; margin:8px 0 0}
.toc a{display:block; padding:4px 0}
.toc a.active{color:var(--primary); font-weight:700}

.kpis{display:grid; grid-template-columns:repeat(3,1fr); gap:10px}
.kpis .pill{padding:12px; border-radius:14px; background:rgba(148,163,184,.08); border:1px solid var(--border); text-align:center}
.callout{background:linear-gradient(180deg,rgba(96,165,250,.12),rgba(96,165,250,.06)); border:1px solid var(--border); border-left:4px solid var(--accent); padding:12px; border-radius:14px}

#tocFab{position:fixed; right:16px; bottom:16px; z-index:60; display:none; border:0; background:var(--primary); color:#fff; padding:12px 14px; border-radius:999px; box-shadow:var(--shadow); cursor:pointer}
#tocFab span{font-weight:700}
#tocDrawer{position:fixed; inset:0; display:none; place-items:end stretch; background:rgba(0,0,0,.5); z-index:70}
#tocDrawer.active{display:grid}
#tocDrawer .drawer-backdrop{position:absolute; inset:0}
#tocDrawer .drawer-panel{position:relative; background:var(--card); border-top-left-radius:16px; border-top-right-radius:16px; min-height:40vh; max-height:80vh; overflow:auto; border:1px solid var(--border); padding:16px}
#tocDrawer .drawer-header{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px}
#tocDrawer .drawer-header button{border:1px solid var(--border); background:var(--bg); color:var(--text); border-radius:10px; padding:6px 10px; cursor:pointer}
@media (max-width: 900px){ .toc{display:none;} #tocFab{display:inline-flex; align-items:center; gap:8px;} }
footer{margin-top:28px}